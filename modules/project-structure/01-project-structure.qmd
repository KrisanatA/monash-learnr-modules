---
title: Project structure
subtitle: 'In this topic, you will learn about the project structure and how to manage your project in R properly.'
title-block-banner: yes
engine: knitr
filters:
  - webr-teachr
execute: 
  echo: false
---

# Paths

The **paths** are used to identify the location of a file, computer, device, or web page. You could think of it as a direction pointing to the destination.

## What does it look like?

### File path

The path may look different depending on the system you are using. If we want to locate a folder called **learnR**, this is what it may look like.

**Windows:**

`C:\Desktop\learnR\data\mtcars.csv`

**MacOS & Linux:**

`/Users/Desktop/learnR/data/mtcars.csv`

### Webpage

To locate the webpage, we use the URL (Uniform Resource Locator) to identify any resource on the internet.

`https://learnr.numbat.space/data/mtcars.csv`


## Absolute and Relative Paths {#sec-abs-rela-path}

:::{.callout-note}
# Absolute path

It is a full location of the file or directory specified, starting from the lowest level.
:::

:::{.callout-note}
# Relative path

It is the location of a file or directory specified relative to your current working directory.
:::

Let's say you are trying to get to your lecture hall inside a campus. An absolute path would be the series of buildings you pass, starting from the campus entrance. But, if you are currently at the campus center, you would only need the direction starting from the campus center, not the entrance. This is what we call relative path.

You should always use the **relative path** when working on a project. It allows anyone who has your project to run the code without changing file paths, as it is unlikely that all the users will have the same absolute path.


# Files organisation

There are many ways you can organise your files. The one principle you should follow is to make sure all the files you used in your analysis are stored within one project folder.

The folder names you use are a personal choice, and there is no best approach. A project’s folders should organise the files and have names that adequately describe its contents. Often, a project contains many files with different purposes, including scripts, data, reports, documents, and other outputs.

Some common folder names you might like to use in the analysis projects.

- Data is commonly stored in the ‘data’ folder, like we created in the slides. If you work with lots of data of different types, you could also use more folders inside your ‘data’ folder. For example, if the data you are working with needs pre-processing and cleaning, you could have ‘data/original’ and ‘data/cleaned’ folders to further organise the data files.
    
- Scripts are commonly stored in folders of many different names. For R projects, an ‘R’ folder is commonly used (from the structure of an R package). Many data analysis projects use a ‘scripts’ folder, and more language-agnostic projects might use a ‘src’ or ‘code’ folder. Your codes are often split across several scripts that perform different tasks, such as cleaning data, producing plots, and generating reports.
   
- Outputs can be stored in many different folders, which describe the type of output. For example, you may use a ‘results’ folder for analysis results, a ‘plots’ folder for plots, and a ‘reports’ folder for reports.

```
learnR
├── data
|   └── mtcars.csv
|
├── R
|   ├── cleaning.R
|   └── analysis.R
|
└── plots
 └── linear.png
```

:::{.callout-important}
# Path

Remember, all paths should be relative to the project folder. In this case, the learnR directory.

:::


# R project

In @sec-abs-rela-path, we have talk about the different type of paths, and that we should always use a relative path. An R project will allows the RStudio to set the working directory correctly, handling all of the relative paths for us. It also encourages you to organised the file structure properly by putting all the files used by that project inside the same folder.

## New R project

1. To create a new project, click the project selector in the top-right corner. Then click on the "New Project...".

```{r}
knitr::include_graphics(here::here("modules/project-structure/pictures/01-project-structure/project_1.png"))
```

2. It will show you three options.
    * If you want to start a new R project in a new location on your computer, select "New Directory"
    * If you want to start a new R project in a location where all the files already exists, select "Existing Directory".
    * If you want to start a new R project by cloning a version control (Git or Subversion) repository, select "Version Control"

    For your very first R project, let's start by select "New Directory"

```{r}
knitr::include_graphics(here::here("modules/project-structure/pictures/01-project-structure/project_2.png"))
```

3. There are many differeny types of R projects that you can create. For a data analysis project, we would select "New Project" for an empty folder.

<!-- update the picture -->

4. Give your project (and the folder that will contain it) a name using the "Directory name:" field. You can also choose where the project will exist on your computer. It can be done by clicking on "Browse..." button. If you did not choose, it will be in your home directory. You can left the rest unticked for now.

```{r}
knitr::include_graphics(here::here("modules/project-structure/pictures/01-project-structure/project_4.png"))
```

5. Click "Create Project".

```{r}
knitr::include_graphics(here::here("modules/project-structure/pictures/01-project-structure/project_5.png"))
```

You should be able to see the project file with .Rproj extension inside the project directory. You have now sucessfully create R project. This file extension will allow use to use it as a shortcut for opening the project directly.

:::{.callout-important}
# Self contained

Projects should be self contained, meaning that all files and data should exist inside the project directory.
:::


## Workspace image

When closing RStudio you might be greeted with this popup asking you to save workspace images.

**You should select "Don't Save"**

Saveing the workspace stores all of the objects you've created for next time you open the project. It may sound tempting to save it, but it's bad for reproducibility. All objects in the environment should be produced with code, and that code should be saved in the project.

You can prevent the popup messages by going to the "Global Options" and inside "General", change "Save workspace to .RData on exit" to "Never".

```{r}
knitr::include_graphics(here::here("modules/project-structure/pictures/01-project-structure/disable_store.png"))
```